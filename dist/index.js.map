{"mappings":"YAAe,SAAAA,EAAyBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,oCAExB,CCJA,SAASC,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,EAChD,CACF,CCLe,ICCTO,EAAM,IDyBT,W,sBA1BkBC,I,IEHmBC,EAAKH,EAAKI,E,cFG7BF,GEH6BE,EFIM,CAAC,GEJZJ,EFInC,eEJ8BG,EFItCE,MEFEP,OAAOC,eAAeI,EAAKH,EAAK,CAC9BI,MAAOA,EACPT,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZM,EAAIH,GAAOI,EFFXE,OAAOC,iBAAiB,WAAW,SAACC,G,IAC9BC,EACFC,EAAAC,GADY,QAAVF,EAAAD,EAAMI,YAAN,IAAAH,OAAA,EAAAA,EAAYD,SACkB,QAAhCG,GAAAD,EAAAG,EAAKC,WAAUN,EAAMI,KAAKJ,cAA1B,IAAAG,KAAAI,KAAAL,EAAmCF,EAAMI,KAAKI,SAElD,G,CDDW,IAAsB7B,EAAa8B,EAAYC,E,OAAzB/B,ECPhBe,GDO6Be,ECP7B,C,CAWnBjB,IAAA,O,MAAA,SAAKQ,EAAeQ,GACdV,OAAOa,KACTb,OAAOa,IAAIC,YAAY,CAAEZ,QAAOQ,WAAW,IAE/C,G,CAEAhB,IAAA,S,MAAA,SAAOQ,EAAea,GACpBhB,KAAKS,UAAUN,GAASa,CAC1B,G,CAEArB,IAAA,a,MAAA,SAAWQ,UACFH,KAAKS,UAAUN,EACxB,MDfgBnB,EAAkBF,EAAYmC,UAAWL,GACrDC,GAAa7B,EAAkBF,EAAa+B,GCT7BhB,C,CA0BlB,ICtBHD,EAAIsB,OAAO,QAAQ,W,OAAMtB,EAAIuB,KAAK,OAAQ,K,IAG1CvB,EAAIsB,OAAO,gBAAgB,W,OAAMjB,OAAOmB,QAAQC,M,IAChDzB,EAAIsB,OAAO,mBAAmB,W,OAAMjB,OAAOmB,QAAQE,S,IACnD1B,EAAIsB,OAAO,mBAAmB,WAC1BK,QAAQC,IAAI,iBACZvB,OAAOwB,SAASC,QACpB,G","sources":["node_modules/@swc/helpers/src/_class_call_check.mjs","node_modules/@swc/helpers/src/_create_class.mjs","src/bus.ts","src/index.ts","node_modules/@swc/helpers/src/_define_property.mjs"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","/*\n  Bus that uses postMessage infrastructure.\n*/\nexport default class Bus {\n  private listeners: Record<string, ListenerCallback> = {}\n\n  constructor() {\n    window.addEventListener(\"message\", (event) => {\n      if (event.data?.event) {\n        this.listeners[event.data.event]?.(event.data.message)\n      }\n    })\n  }\n\n  emit(event: string, message: any) {\n    if (window.top) {\n      window.top.postMessage({ event, message }, \"*\")\n    }\n  }\n\n  listen(event: string, callback: ListenerCallback) {\n    this.listeners[event] = callback\n  }\n\n  unregister(event: string) {\n    delete this.listeners[event]\n  }\n}\n\ntype ListenerCallback = (message: any) => void\n","import { Decode } from \"console-feed/lib/Transform\"\nimport Hook from \"console-feed/lib/Hook\"\nimport Bus from \"./bus\"\n\nconst bus = new Bus()\n\n// Pong.\nbus.listen(\"ping\", () => bus.emit(\"pong\", null))\n\n// Navigation helpers.\nbus.listen(\"history.back\", () => window.history.back())\nbus.listen(\"history.forward\", () => window.history.forward())\nbus.listen(\"location.reload\", () => {\n    console.log(\"relodaing....\")\n    window.location.reload()\n})\n\n// Console proxy.\n// Hook(window.console, (log) => bus.emit(\"console-feed.message\", Decode(log)))\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n"],"names":["$9d9ce3bbdcc12e84$export$2e2bcd8739ae039","instance","Constructor","TypeError","$41c23a70ac31e190$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","$df47fa6a616503fb$var$bus","Bus","obj","value","this","window","addEventListener","event","_event_data","_this_listeners","_this_listeners_event_data_event","data","_this","listeners","call","message","protoProps","staticProps","top","postMessage","callback","prototype","listen","emit","history","back","forward","console","log","location","reload"],"version":3,"file":"index.js.map"}